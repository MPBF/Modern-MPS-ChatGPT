
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

✅ Meta WhatsApp API service initialized successfully
✅ Twilio WhatsApp service initialized successfully
🚀 Using Meta WhatsApp Business API directly
🔒 Performing startup password security check...
✅ Password security check passed: All 50 user passwords are properly hashed
[SystemHealthMonitor] نظام مراقبة السلامة مُفعل
[SystemHealthMonitor] تم تحميل قواعد التحذيرات
[AlertManager] نظام إدارة التحذيرات مُفعل
[DataValidator] نظام التحقق من صحة البيانات مُفعل
[DataValidator] تم تحميل 9 قاعدة تحقق افتراضية
[SmartAlerts] نظام التحذيرات الذكية مُفعل ✅
[SystemHealthMonitor] تم إنشاء فحوصات السلامة الافتراضية
[AlertManager] تم تحميل 0 قاعدة تحذير نشطة
[DataValidator] تم تسجيل المدققات المخصصة
[DataValidator] تم تشغيل نظام التحقق من البيانات بنجاح ✅
[SystemHealthMonitor] بدأت المراقبة الدورية
[SystemHealthMonitor] تم تشغيل نظام المراقبة بنجاح ✅
[AlertManager] تم تحميل 0 تحذير نشط
[AlertManager] تم تشغيل نظام إدارة التحذيرات بنجاح ✅
1:05:05 AM [express] serving on port 5000
1:05:24 AM [express] GET /api/me 401 in 2ms :: {"message":"غير مسجل الدخول - يرجى تسجيل الدخول أولاً…
1:05:25 AM [express] GET /api/me 401 in 1ms :: {"message":"غير مسجل الدخول - يرجى تسجيل الدخول أولاً…
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: اتصال قاعدة البيانات
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: أداء قاعدة البيانات
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: استخدام الذاكرة
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[NotificationManager] Sent heartbeat to 0 connections
[NotificationManager] Sent heartbeat to 0 connections
[NotificationManager] Sent heartbeat to 0 connections
[NotificationManager] Sent heartbeat to 0 connections
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: اتصال قاعدة البيانات
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: أداء قاعدة البيانات
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[SystemHealthMonitor] تم إنشاء تحذير النظام: مشكلة في سلامة النظام: استخدام الذاكرة
[NotificationManager] No active connections for user 8, notification saved to database only
[NotificationManager] No active connections for user 19, notification saved to database only
[NotificationManager] No active connections for user 18, notification saved to database only
[NotificationManager] No active connections for user 3, notification saved to database only
[NotificationManager] No active connections for user 20, notification saved to database only
[NotificationManager] No active connections for user 24, notification saved to database only
[NotificationManager] No active connections for user 21, notification saved to database only
[NotificationManager] No active connections for user 1, notification saved to database only
[NotificationManager] No active connections for user 23, notification saved to database only
[NotificationManager] No active connections for user 25, notification saved to database only
[NotificationManager] No active connections for user 26, notification saved to database only
[NotificationManager] No active connections for user 27, notification saved to database only
[NotificationManager] No active connections for user 57, notification saved to database only
[NotificationManager] No active connections for user 59, notification saved to database only
[NotificationManager] No active connections for user 52, notification saved to database only
[NotificationManager] No active connections for user 29, notification saved to database only
[NotificationManager] No active connections for user 56, notification saved to database only
[NotificationManager] No active connections for user 28, notification saved to database only
[NotificationManager] No active connections for user 30, notification saved to database only
[NotificationManager] No active connections for user 58, notification saved to database only
[NotificationManager] No active connections for user 31, notification saved to database only
[NotificationManager] No active connections for user 33, notification saved to database only
[NotificationManager] No active connections for user 34, notification saved to database only
[NotificationManager] No active connections for user 32, notification saved to database only
[NotificationManager] No active connections for user 40, notification saved to database only
[NotificationManager] No active connections for user 36, notification saved to database only
[NotificationManager] No active connections for user 35, notification saved to database only
[NotificationManager] No active connections for user 38, notification saved to database only
[NotificationManager] No active connections for user 39, notification saved to database only
[NotificationManager] No active connections for user 37, notification saved to database only
[NotificationManager] No active connections for user 42, notification saved to database only
[NotificationManager] No active connections for user 44, notification saved to database only
[NotificationManager] No active connections for user 43, notification saved to database only
[NotificationManager] No active connections for user 45, notification saved to database only
[NotificationManager] No active connections for user 46, notification saved to database only
[NotificationManager] No active connections for user 49, notification saved to database only
[NotificationManager] No active connections for user 48, notification saved to database only
[NotificationManager] No active connections for user 50, notification saved to database only
[NotificationManager] No active connections for user 51, notification saved to database only
[NotificationManager] Sent notification to 39 users in role 1
[NotificationManager] Sent notification to 0 users in role 2
[NotificationManager] Sent heartbeat to 0 connections
1:10:00 AM [express] POST /api/login 200 in 547ms :: {"user":{"id":1,"username":"AbuKhalid","display…
1:10:01 AM [express] GET /api/dashboard/stats 200 in 1ms :: {"activeOrders":0,"productionRate":5,"qu…
1:10:01 AM [express] GET /api/production/film-queue 200 in 72ms :: [{"id":28,"production_order_numbe…
1:10:01 AM [express] GET /api/production/printing-queue 200 in 79ms :: []
1:10:01 AM [express] GET /api/production/hierarchical-orders 200 in 93ms :: [{"id":58,"order_number"…
1:10:01 AM [express] GET /api/notifications 200 in 116ms :: [{"id":2482,"title":"مشكلة في سلامة النظ…
1:10:01 AM [express] GET /api/production/cutting-queue 200 in 66ms :: []
1:10:01 AM [express] GET /api/production/grouped-cutting-queue 200 in 62ms :: []
1:10:01 AM [express] GET /api/production-orders 200 in 68ms :: [{"id":30,"production_order_number":"…
1:10:02 AM [express] GET /api/sections 200 in 62ms :: [{"id":"SEC01","name":"Administration","name_a…
1:10:02 AM [express] GET /api/machines 200 in 69ms :: [{"id":"MAC12","name":"Printer B","name_ar":"P…
1:10:02 AM [express] GET /api/rolls 200 in 62ms :: [{"id":49,"roll_seq":1,"roll_number":"PO003-01","…
[SystemHealthMonitor] تم رصد مؤشرات الأداء
[SystemHealthMonitor] فحص الطلبات المتأخرة
[SystemHealthMonitor] فحص حالة المكائن
[SystemHealthMonitor] فحص المواد قليلة المخزون
[SystemHealthMonitor] تم تنظيف البيانات القديمة
[NotificationManager] Sent heartbeat to 0 connections
1:10:32 AM [express] GET /api/production/film-queue 304 in 256ms :: [{"id":28,"production_order_numb…
1:10:32 AM [express] GET /api/production/printing-queue 304 in 252ms :: []
1:10:32 AM [express] GET /api/production/hierarchical-orders 304 in 247ms :: [{"id":58,"order_number…
1:10:32 AM [express] GET /api/production/cutting-queue 304 in 61ms :: []
1:10:32 AM [express] GET /api/production/grouped-cutting-queue 304 in 59ms :: []
[NotificationManager] Sent heartbeat to 0 connections

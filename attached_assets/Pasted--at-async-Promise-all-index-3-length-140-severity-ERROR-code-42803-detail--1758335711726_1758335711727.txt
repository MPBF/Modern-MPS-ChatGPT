 at async Promise.all (index 3) {
  length: 140,
  severity: 'ERROR',
  code: '42803',
  detail: undefined,
  hint: undefined,
  position: '393',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_agg.c',
  line: '781',
  routine: 'check_agg_arguments_walker'
}
Database error during getOrderReports: error: column "order_count" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2252:83)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getOrderReports (/home/runner/workspace/server/storage.ts:2247:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1385:23) {
  length: 112,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '501',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Order reports error: DatabaseError: خطأ في قاعدة البيانات أثناء getOrderReports - تقارير الطلبات
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getOrderReports (/home/runner/workspace/server/storage.ts:2247:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1385:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
2:34:03 AM [express] GET /api/reports/orders 500 in 476ms :: {"message":"خطأ في جلب تقارير الطلبات",…
2:34:03 AM [express] GET /api/reports/advanced-metrics 200 in 433ms :: {"success":true,"data":"[Obje…
Database error during getProductionAlerts: error: column "waste_percentage" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2165:30)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getProductionAlerts (/home/runner/workspace/server/storage.ts:2136:12)
    at async Promise.all (index 9) {
  length: 117,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '330',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Database error during getHRReports: error: missing FROM-clause entry for table "attendance"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 1)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2388:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1427:23) {
  length: 122,
  severity: 'ERROR',
  code: '42P01',
  detail: undefined,
  hint: undefined,
  position: '561',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3657',
  routine: 'errorMissingRTE'
}
HR reports error: DatabaseError: خطأ في النظام - جدول البيانات غير موجود
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:214:11)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1427:23) {
  code: '42P01',
  constraint: undefined,
  table: undefined
}
2:34:03 AM [express] GET /api/reports/hr 500 in 61ms :: {"message":"خطأ في جلب تقارير الموارد البشري…
Database error during getMaintenanceReports: error: aggregate function calls cannot contain window function calls
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2449:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getMaintenanceReports (/home/runner/workspace/server/storage.ts:2444:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1448:23) {
  length: 140,
  severity: 'ERROR',
  code: '42803',
  detail: undefined,
  hint: undefined,
  position: '393',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_agg.c',
  line: '781',
  routine: 'check_agg_arguments_walker'
}
Maintenance reports error: DatabaseError: خطأ في قاعدة البيانات أثناء getMaintenanceReports - تقارير الصيانة
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getMaintenanceReports (/home/runner/workspace/server/storage.ts:2444:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1448:23) {
  code: '42803',
  constraint: undefined,
  table: undefined
}
2:34:03 AM [express] GET /api/reports/maintenance 500 in 64ms :: {"message":"خطأ في جلب تقارير الصيا…
2:34:24 AM [express] GET /api/me 304 in 232ms :: {"user":"[Object]","success":true}
2:34:25 AM [express] GET /api/me 304 in 58ms :: {"user":"[Object]","success":true}
Database error during getHRReports: error: invalid input syntax for type timestamp: "08:30:00"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 0)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2388:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1482:11) {
  length: 122,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: '281',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4026',
  routine: 'DateTimeParseError'
}
Comprehensive dashboard error: DatabaseError: خطأ في قاعدة البيانات أثناء getHRReports - تقارير الموارد البشرية
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1482:11) {
  code: '22007',
  constraint: undefined,
  table: undefined
}
2:34:25 AM [express] GET /api/reports/dashboard 500 in 250ms :: {"message":"خطأ في جلب التقرير الشام…
Database error during getOrderReports: error: column "order_count" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2252:83)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getOrderReports (/home/runner/workspace/server/storage.ts:2247:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1385:23) {
  length: 112,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '501',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Order reports error: DatabaseError: خطأ في قاعدة البيانات أثناء getOrderReports - تقارير الطلبات
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getOrderReports (/home/runner/workspace/server/storage.ts:2247:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1385:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
2:34:25 AM [express] GET /api/reports/orders 500 in 260ms :: {"message":"خطأ في جلب تقارير الطلبات",…
Database error during getOrderReports: error: column "order_count" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2252:83)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getOrderReports (/home/runner/workspace/server/storage.ts:2247:12)
    at async Promise.all (index 0) {
  length: 112,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '501',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Database error during getMaintenanceReports: error: aggregate function calls cannot contain window function calls
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2449:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getMaintenanceReports (/home/runner/workspace/server/storage.ts:2444:12)
    at async Promise.all (index 3) {
  length: 140,
  severity: 'ERROR',
  code: '42803',
  detail: undefined,
  hint: undefined,
  position: '393',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_agg.c',
  line: '781',
  routine: 'check_agg_arguments_walker'
}
Database error during getUserPerformanceStats: error: column "rolls_created" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:1990:14)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getUserPerformanceStats (/home/runner/workspace/server/storage.ts:1960:12)
    at async Promise.all (index 5) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '1472',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Database error during getHRReports: error: invalid input syntax for type timestamp: "08:30:00"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 0)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2388:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1427:23) {
  length: 122,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: '281',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4026',
  routine: 'DateTimeParseError'
}
HR reports error: DatabaseError: خطأ في قاعدة البيانات أثناء getHRReports - تقارير الموارد البشرية
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getHRReports (/home/runner/workspace/server/storage.ts:2383:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1427:23) {
  code: '22007',
  constraint: undefined,
  table: undefined
}
2:34:25 AM [express] GET /api/reports/hr 500 in 170ms :: {"message":"خطأ في جلب تقارير الموارد البشر…
Database error during getRolePerformanceStats: error: column "total_weight_kg" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2000:25)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getRolePerformanceStats (/home/runner/workspace/server/storage.ts:1995:12)
    at async Promise.all (index 6) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '783',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Database error during getMachineUtilizationStats: error: column "total_weight" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2221:28)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getMachineUtilizationStats (/home/runner/workspace/server/storage.ts:2216:12)
    at async Promise.all (index 7) {
  length: 113,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '884',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
2:34:25 AM [express] GET /api/notifications 200 in 59ms
2:34:25 AM [express] GET /api/reports/advanced-metrics 304 in 548ms :: {"success":true,"data":"[Obje…
Database error during getMaintenanceReports: error: aggregate function calls cannot contain window function calls
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Promise.all (index 2)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2449:66)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getMaintenanceReports (/home/runner/workspace/server/storage.ts:2444:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1448:23) {
  length: 140,
  severity: 'ERROR',
  code: '42803',
  detail: undefined,
  hint: undefined,
  position: '393',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_agg.c',
  line: '781',
  routine: 'check_agg_arguments_walker'
}
Maintenance reports error: DatabaseError: خطأ في قاعدة البيانات أثناء getMaintenanceReports - تقارير الصيانة
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:228:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:242:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async DatabaseStorage.getMaintenanceReports (/home/runner/workspace/server/storage.ts:2444:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1448:23) {
  code: '42803',
  constraint: undefined,
  table: undefined
}
2:34:25 AM [express] GET /api/reports/maintenance 500 in 405ms :: {"message":"خطأ في جلب تقارير الصي…
Database error during getProductionAlerts: error: column "waste_percentage" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:2165:30)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:240:12)
    at async DatabaseStorage.getProductionAlerts (/home/runner/workspace/server/storage.ts:2136:12)
    at async Promise.all (index 9) {
  length: 117,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '330',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
